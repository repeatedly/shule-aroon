<div id="description">
  <h2>Select your Identity Provider</h2>
  <p>
    Select from following IdP list.
  </p>
</div>

<div id="recent_IdP">

</div>

<form id="IdP_select" action="./" method="get">
  <fieldset>
    <legend>Identity Provider List</legend>
    <input type="hidden" name="entityID" value="#{@params['entityID']}" />
    <input type="hidden" name="return_" value="#{@params['return']}" />
    <input type="hidden" name="returnIDParam" value="#{@params['returnIDParam'] || 'entityID'}" />
    <select name="user_IdP">
    <?r @list.each_pair do |fed_name, idp| ?>
    <optgroup label="#{fed_name}">
      <?r idp.each_pair do |id, value| ?>
      <option value="#{id}">#{value[:name] || id}</option>
      <?r end ?>
    </optgroup>
    <?r end ?>
    </select>
    <input type="submit" name="IdP_select" value="Select" /><br /><br />
    <input type="checkbox" name="cookie" value="true" id="remember" />
    <label for="remember">Remember this selection.</label>
  </fieldset>
</form>
